<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<script
  src="http://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous">
</script>
<script type="text/javascript">

$('document').ready(init);

function init() {
	$('#type').on('change', changeTypeHandler);
}

function changeTypeHandler() {
	var detailValue = $('#type').val();
	$.ajax({
		url: 'JQServlet',
		data: {type:detailValue},
		datatype: 'json',
		success: changeDetail
	})
}

function changeDetail(data) {
	//alert(JSON.stringify(data));
	// detail 내부 삭제 새로 생성
	$('#detail').empty();
	for(var key in data) {
		$('#detail').append("<option value='"+key+"'>"+data[key]+"</option>");
	}
}


</script>

<style type="text/css">
	header,section,footer,aside,nav,article,figure,figcaption,hgroup{
  		display: block;
  		text-align: center;
  	}
	table{
		border: 1px solid;
		width: 960px;
	}
	td{
		width: 200px;
	}
	header{
		height: 80px;
		margin: 5px;
		padding: 10px;
		background: #cccccc;
		text-align: center;
	}

</style>

</head>
<body>
	<header>
		<h1>jQuery Ajax Exercise</h1>
	</header>
	<section>
		<form action="">
			<table>
				<tr><td>
					<select id="type">
						<option value="koreanfood">한식</option>
						<option value="saladbar">셀러드바</option>
					</select>
					</td>
					<td>
					<select id="detail">
						<option value="sodam">소담</option>
						<option value="babnbool">밥앤불고기</option>
					</select>
					</td>
				</tr>
				<tr><td></td><td></td></tr>
			</table>
		</form>
	</section>
</body>
</html>